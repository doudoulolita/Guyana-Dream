<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>Mon RPG perso - collision images</title>
	<link rel="stylesheet" type="text/css" href="css/style.css" /><!-- lien vers la feuille de style -->
	<!--[if IE]><script type="text/javascript" src="js/excanvas.js"></script><![endif]-->
    </head>

    <body>

	<h1>Mon RPG perso - collision avec des images</h1><!-- titre de niveau 1 -->

 			<!-- image du personnage à côté du canvas -->

				<figure>
					<img src="choix-joueur1.png" />
					<figcaption>
						Joueur 1
					</figcaption>
				</figure>



		<canvas id="tuiles" width="192" height="192"></canvas>
        
		<canvas id="persos" width="192" height="192"></canvas>



	<br style="clear:both;" />
            
	<!-- lien vers les fichiers en javascript -->

	<script type="text/javascript" charset="UTF-8" src="js/jeu.js" ></script> 
        <script type="text/javascript" charset="UTF-8" src="js/image.js" ></script>
        <script type="text/javascript" charset="UTF-8" src="js/perso.js" ></script>
        <script type="text/javascript" charset="UTF-8" src="js/deplacements.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="js/collision-decor.js" ></script>
        <script type="text/javascript" charset="UTF-8" src="js/animation.js" ></script>
        <script type="text/javascript" charset="UTF-8" src="js/clavier.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="js/collision-bords.js" ></script>


	<br style="clear:both;" />

		<h2>Explications du jeu</h2>


	<img src="joueur1.png" style="float:left; margin:20px;" />
	<p>Animation d'un sprite de 32 * 32 px sur un canvas de 384 * 192 px.</p>
	<p>Sépararation des fonctions : deplacementPerso() qui change l'emplacement du personnage et  de changePose() qui gère l'animation des membres.</p>
	<p>Les déplacements avec les flèches du clavier sont gérés par la fonction persoBouge(e) dans le fichier clavier.js, mais on a ajouté un fichier deplacements.js qui précise les fonctions utilisées pour le déplacement vertical et le deplacement horizontal La fonction changePose() est incluse dedans, afin que le personne cesse de bouger quand on lâche la touche.</p>
	<p>Utilisation de requestAnimationFrame() avec un callback pour que la fonction animePerso se répéte régulièrement</p>
	<p>On peut moduler la vitesse de déplacement vx et la vitesse de passage d'une pose à l'autre avec vPose (dans le fichier <a href="js/perso.js">perso.js</a>).</p>
	<p>Gestion du de la collision sur les bords du canvas par la fonctions bloqueDeplacement(), appelée dans la fonction animePerso().</p>


		<figure>
			<img src="cachette-fougeres-jaunes.png" style="border:dotted 1px grey" />
			<figcaption>
			Image <br />à afficher
			</figcaption>	
		</figure>

	<p>Les images du décor sont placées sur un canvas différent. Les 2 canvas sont récupérés grâce à leur id.</p>
	<p> La gestion de la collision avec l'image des fougères est faite dans le fichier collision-decor.js. Les fonctions bloquant horizontalement et verticalement le personnage en fonction des coordonnées des images sont appelées dans les fonctions de déplacement horizontal et vertical du fichier deplacement.js.<p>
	<p>Le fichier image.js est transformé pour donner la position de l'image sous forme de variable réutilisable, tant pour l'affichage que pour la collision. On peut donc afficher plusieurs images de décors qui bloqueront le personnage, en pensant à laisser de l'espace pour qu'il se déplace autour !</p>

	<br style="clear:both;" />

	<p>Fichiers javascript :
	<ul style="margin-bottom:30px;">
		<li><a href="js/perso.js">perso.js</a></li>
		<li><a href="js/animation.js">animation.js</a></li>
		<li><a href="js/clavier.js">clavier.js</a></li>
		<li><a href="js/collision-bords.js">collision-bords.js</a></li>
		<li><a href="js/jeu.js">jeu.js</a></li>
	</ul>
	</p>

	<footer style="clear:both;">Réalisé d'après la vidéo <a href="https://www.youtube.com/watch?v=yna816VY8rg">Sprites et animation - Javascript </a> par <a href="https://www.youtube.com/channel/UChXy935RrhKDL3EtFcITM5w">Computer Scientists</a>, avec beaucoup de transformations</footer>
       
    </body>
</html>
